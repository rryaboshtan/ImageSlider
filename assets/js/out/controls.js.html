<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: controls.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: controls.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>

/**
 * @typedef {object} ControlRefType
 * @property {HTMLButtonElement} first
 * @property {HTMLButtonElement} prev
 * @property {HTMLButtonElement} next
 * @property {HTMLButtonElement} last
 */

/**
 * Custom element that renders controls to navigate the slideContainer
 * @extends {HTMLElement}
 */
class Controls extends HTMLElement {
   /**
    * Create a new instance of controls
    */
   constructor() {
      super();
      /**
       * @property {ControlRefType}
       */
      this.controlRef = null;
      /**
       * @type {Navigator}
       */
      this.slideContainer = null;
   }

   /**
    * Called when the element is inserted into the DOM. Used to fetch controls template and relation with the slideContainer
    */
   async connectedCallback() {
      let template = null;
      try {
         const response = await fetch('/assets/templates/controls.html');
         template = await response.text();
      } catch (e) {
         throw new Error('Controls: fetching /assets/templates/controls.html are impossible');
      }

      console.log('Template = ', template);
      this.innerHTML = '';
      const host = document.createElement('div');
      host.innerHTML = template;
      console.log('host.innerHTML = ', host.innerHTML);
      this.appendChild(host);
      console.log('this = ', this);
      this.controlRef = {
         first: document.getElementById('ctrlFirst'),
         prev: document.getElementById('ctrlPrevious'),
         next: document.getElementById('ctrlNext'),
         last: document.getElementById('ctrlLast'),
         pos: document.getElementById('position'),
      };
      console.log("document.getElementById('ctrlFirst') = ", document.getElementById('ctrlFirst'));
      console.log('this.controlRef.first = ', this.controlRef.first);
      this.controlRef.first.addEventListener('click', () => this.slideContainer.jumpTo(0));
      this.controlRef.prev.addEventListener('click', () => this.slideContainer.previous());
      this.controlRef.next.addEventListener('click', () => this.slideContainer.next());
      this.controlRef.last.addEventListener('click', () => this.slideContainer.jumpTo(this.slideContainer.totalSlides - 1));
      this.refreshState();
   }

   /**
    * Get the list of observable attributes
    * @returns {string[]}
    */
   static get observedAttributes() {
      return ['slide-container'];
   }
   /**
    *Called when the attribute is set
    * @param {string} attrName
    * @param {string} oldVal
    * @param {string} newVal
    */
   async attributeChangedCallback(attrName, oldVal, newVal) {
      if (attrName === 'slide-container' &amp;&amp; oldVal !== newVal) {
         this.slideContainer = document.getElementById(newVal);
         this.slideContainer.addEventListener('slideschanged', () => this.refreshState());
         window.addEventListener('keydown', (e) => {
            if (e.code === 'ArrowRight' || e.code === 'Space') {
               this.slideContainer.next();
            } else if (e.code === 'ArrowLeft') {
               this.slideContainer.previous();
            }
         });
      }
   }

   /**
    * Enables/Disables control buttons and show the number of current slider
    */
   refreshState() {
      if (!this.slideContainer) {
         throw new Error('Controls: slideContainer variable is not exist or equal to null');
      }
      const next = this.slideContainer.hasNext;
      const prev = this.slideContainer.hasPrevious;
      this.controlRef.first.disabled = !prev;
      this.controlRef.prev.disabled = !prev;
      this.controlRef.next.disabled = !next;
      this.controlRef.last.disabled = !next;
      this.controlRef.pos.innerText = `${this.slideContainer.currentIndex + 1} / ${this.slideContainer.totalSlides}`;
   }
}

/**
 * Connect the Controls class with html slide-controls element
 */
export const registerControls = () => customElements.define('slide-controls', Controls);
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Animator.html">Animator</a></li><li><a href="Controls.html">Controls</a></li><li><a href="module.exports_module.exports.html">exports</a></li><li><a href="Router.html">Router</a></li><li><a href="SlideContainer.html">SlideContainer</a></li></ul><h3>Global</h3><ul><li><a href="global.html#html">html</a></li><li><a href="global.html#loadSlide">loadSlide</a></li><li><a href="global.html#nextSlideName">nextSlideName</a></li><li><a href="global.html#registerControls">registerControls</a></li><li><a href="global.html#registerDeck">registerDeck</a></li><li><a href="global.html#title">title</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.7</a> on Sun Sep 26 2021 23:10:29 GMT+0300 (Восточная Европа, летнее время)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
